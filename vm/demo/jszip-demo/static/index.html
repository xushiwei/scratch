<html>
<head>
</head>
<body>
<p><label>Selected a *.sb2 or *.sb3 file:</label></p>
<p><input type="file" id="sb" accept=".sb3,.sb2"/></p>
<p id="filename"></p>
<script src="/dist/jszip.min.js"></script>
<script src="/dist/web/scratch-vm.js"></script>
<script>
// const vm = new VirtualMachine();

const sb = document.getElementById("sb");
sb.addEventListener("change", handleFiles, false);

function handleFiles() {
    const zip = new JSZip();
    const fname = sb.files[0];
    zip.loadAsync(fname).then((zip) => {
        // https://stuk.github.io/jszip/documentation/api_jszip/file_name.html
        zip.file("project.json").async("string").then((project) => {
            document.getElementById("filename").innerText = project;
            /*
            vm.deserializeProject(project, zip).then(() => {
                document.getElementById("filename").innerText = fname;
            });
            */
        })
    });
}
</script>
</body>
</html>
